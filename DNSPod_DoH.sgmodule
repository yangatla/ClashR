#!name=DNSPod DoH
#!desc=Enable DNS over HTTPS (DoH) with DNSPod Public DNS.

[General]
loglevel = notify
internet-test-url = http://www.aliyun.com
proxy-test-url = http://www.bing.com
ipv6 = true
allow-wifi-access = true
external-controller-access = passw0rd@0.0.0.0:6170
skip-proxy = 127.0.0.1,192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,100.64.0.0/10,localhost,*.local,e.crashlytics.com,captive.apple.com,::ffff:0:0:0:0/1,::ffff:128:0:0:0/1
bypass-system = true
tls-provider = default
network-framework = false
replica = false
show-error-page-for-reject = true
bypass-tun = 192.168.0.0/16,10.0.0.0/8,172.16.0.0/12
exclude-simple-hostnames = true
always-real-ip = msftconnecttest.com, msftncsi.com, *.msftconnecttest.com, *.msftncsi.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com

# macOS Only
enhanced-mode-by-rule = true
dns-server = 127.0.0.1, ::1, 10.194.46.76, 198.18.0.1, 119.29.29.29

[Rule]
USER-AGENT,EndNote,DIRECT
URL-REGEX,https?:\/\/.+.googlevideo.com\/ptracking\?pltype=adhost,REJECT
URL-REGEX,https?:\/\/.+.youtube.com\/api\/stats\/ads,REJECT
URL-REGEX,https?:\/\/.+.youtube.com\/get_midroll_,REJECT
URL-REGEX,https?:\/\/.+.youtube.com\/pagead\/,REJECT
URL-REGEX,https?:\/\/.+.youtube.com\/ptracking\?,REJECT
URL-REGEX,https?:\/\/.+.youtube.com\/_get_ads,REJECT
URL-REGEX,https?:\/\/premiumyva.appspot.com\/vmclickstoadvertisersite,REJECT
URL-REGEX,https?:\/\/s0.2mdn.net\/ads\/,REJECT
URL-REGEX,https?:\/\/stats.tubemogul.com\/stats\/,REJECT
URL-REGEX,https?:\/\/youtubei.googleapis.com\/.+ad_break,REJECT
URL-REGEX,https?:\/\/youtubei.googleapis.com\/youtubei\/.+(ad|log),REJECT
URL-REGEX,https?:\/\/s\.youtube\.com\/api\/stats\/qoe\?adformat,REJECT
URL-REGEX,https?:\/\/[\w-]+\.googlevideo\.com\/.+&oad,REJECT-TINYGIF
DOMAIN-SET,https://cdn.jsdelivr.net/gh/privacy-protection-tools/anti-AD@master/anti-ad-surge2.txt,REJECT
DOMAIN-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/Advertising/Advertising_Domain.list,REJECT
# DOMAIN-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/release/rule/Surge/Advertising/Advertising_Domain.list,REJECT
# RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/release/rule/Surge/Advertising/Advertising.list,REJECT

[URL Rewrite]
ctier=[A-Z] citer=A 302

[Script]
http-request https?:\/\/.+?\.googlevideo\.com\/.+&(oad|ctier)=(?!A),script-path=https://choler.github.io/Surge/Script/YouTube.js

[MITM]
enable = false
tcp-connection = false
skip-server-cert-verify = true
hostname = %APPEND% *.googlevideo.com, *.youtube.com, youtubei.googleapis.com, *.abema.tv, *.amemv.com, *.chelaile.net.cn, *.didistatic.com, *.google-analytics.com, *.googlevideo.com, *.iydsj.com, *.k.sohu.com, *.kfc.com, *.kingsoft-office-service.com, *.meituan.net, *.ofo.com, *.pixiv.net, *.pstatp.com, *.rixcloudservice.com, *.snssdk.com, *.uve.weibo.com, *.wikipedia.org, *.wikiwand.com, *.ydstatic.com, *.youdao.com, *.youtube.com, *.zhuishushenqi.com, 119.18.193.135, 123.59.31.1, 153.3.236.81, 180.101.212.22, 218.11.3.70, 59.151.53.6, a.apicloud.com, a.applovin.com, a.qiumibao.com, a.sfansclub.com, a.wkanx.com, abema.tv, acs.m.taobao.com, act.vip.iqiyi.com, adse.ximalaya.com, api*.amemv.com, api*.musical.ly, api*.tiktokv.com, api-release.wuta-cam.com, api.abema.io, api.bilibili.com, api.daydaycook.com.cn, api.gotokeep.com, api.intsig.net, api.jr.mi.com, api.jxedt.com, api.kkmh.com, api.m.jd.com, api.mgzf.com, api.psy-1.com, api.rr.tv, api.smzdm.com, api.tv.sohu.com, api.wallstreetcn.com, api.weibo.cn, api.xiachufang.com, api.zhihu.com, api.zhuishushenqi.com, api5.futunn.com, app.10086.cn, app.58.com, app.api.ke.com, app.bilibili.com, app.mixcapp.com, app.variflight.com, app.wy.guahao.com, b.zhuishushenqi.com, c.m.163.com, cap.caocaokeji.cn, capi.mwee.cn, cdn.moji.com, channel.beitaichufang.com, client.mail.163.com, cms.daydaycook.com.cn, dspsdk.abreader.com, fdfs.xmcdn.com, gateway.shouqiev.com, gw-passenger.01zhuanche.com, gw.alicdn.com, huichuan.sm.cn, i.weread.qq.com, i.ys7.com, iapi.bishijie.com, iface.iqiyi.com, img*.doubanio.com, img.jiemian.com, interface.music.163.com, ios.wps.cn, m*.amap.com, m.client.10010.com, m.creditcard.ecitic.com, m.ibuscloud.com, m.yap.yahoo.com, mapi.mafengwo.cn, mapi.weibo.com, media.qyer.com, mi.gdt.qq.com, mob.mddcloud.com.cn, mobile-api2011.elong.com, mp.weixin.qq.com, mrobot.pcauto.com.cn, mrobot.pconline.com.cn, ms.jr.jd.com, msspjh.emarbox.com, newsso.map.qq.com, nnapp.cloudbae.cn, open.qyer.com, portal-xunyou.qingcdn.com, pss.txffp.com, r.inews.qq.com, render.alipay.com, res-release.wuta-cam.com, richmanapi.jxedt.com, service.4gtv.tv, smkmp.96225.com, snailsleep.net, sp.kaola.com, ssl.kohsocialapp.qq.com, static.vuevideo.net, static1.keepcdn.com, support.you.163.com, thor.weidian.com, www.dandanzan.com, www.flyertea.com, www.zhihu.com, youtubei.googleapis.com, zhidao.baidu.com, *.music.163.com, *.music.126.net, music.163.com, music.126.net, api.weibo.cn, mapi.weibo.com, *.uve.weibo.com, ios.prod.ftl.netflix.com, api.m.jd.com, trade-acs.m.taobao.com, api.gotokeep.com
ca-passphrase = 22D6622F
ca-p12 = MIIJtAIBAzCCCX4GCSqGSIb3DQEHAaCCCW8EgglrMIIJZzCCA9cGCSqGSIb3DQEHBqCCA8gwggPEAgEAMIIDvQYJKoZIhvcNAQcBMBwGCiqGSIb3DQEMAQYwDgQIo2mWMY7Q5oUCAggAgIIDkBK8yINpTBPzu+SKJPtNoxF6j+Tt4XZ/OhbsxLvdma1YYzqNbCmRYMOpEN5szBxGKjzkvDd4BstZMn70Kq8L654pKCrcBCtx1a6E4xU9a54JIY36crO/Xo+NGWVIXLm2ZYjA5aAi3yHZQVGoipDo0HJQxne3ad8uxDbqNwOI/FOiLxjYivuPQ3fw0OlfjO5SVoqk93Q86F4vfBJZr6mX6c6UOQNfyt9PVBpDJPqmL41GMX7ibCCl+fnOwxYYkD1z14sWHaDvqbL/gZML9AjVFzpOuy0jkwOC26UgH+lbm71BE7Ucoe9LildFvOz8jFPd4YyAMyIWHUX8LTNeKMHs7uy6iLbZAMO9q8N9r/rC9TgKYCHQZT6/NeC9tP5wWIaXqLIp2GLvBtguU0PgGjEG7RDHMtMbMOD1yOWpRB4Dm86iAe+HY7rvD87+K2M+WmsxgUHRAoUf14b4Gki2STWM3Rd6EYIg3jST2BH6H359Ask5aBfh+n9zy9rZvHlHiPhzdbEaQ1IF47etYjj/aBkB+QOy0JwBY/ByfS6RiVAt7Qmfwp9KK80W7oBPijgbsWKb9kQXbGp+VOz1rWCvPZ4sBRRboSE/n7HEgbOT+I6ELTd70L6iCHMT8T6g3CHOMmmTGoz+nQV7ICnDvc9YHzv2idb1DRkkQFbaN72nuKc/NUq5fW0WnLqMkec2bUUvT9aOMOKYvExZ3aHA6VLSExDwNtBA6+i6K2a3W6A3yTtzl313UeMQrtmpq56V2Ya9T26SKWqplV7PDX9QJs2nS/E/cXoRmujRHfmvZ11Th0qdlvzGQ+94m37X8yl4WQNJz9mavB51UMtFXQ2ODlUIdfNE7OGXCBPDBx6TCdJ1TeukYLru4nFSjIBT6uMkDk6OCoRVj7kgMzG4AOr7YdGx+zLVoyEWDKKxBVZRSN8oooN7V1egNVXL94BSGxAIbQM0HxqLOoqE0FjlgT/V4Xfrl6olseit7Yw+aSw5Sw7CtKRNmzyQ5oxzP/uKvjTjjfwgfV9JssFacSQafz4PrTDe9aR/2maW4Q9OwpUNClEAMzIK/Lt197/4C92FjLWRFs1dkIukTRKlIDmYzWPBglYnlZnQ8uZMtHirKemqMNpvRQKith5QPZq7nTjWFoo4Gq/cZoB1/2xzB6JzCVPmIXaHazCtlaa3MlRyPVCYro/bTC+6qE2zLL1hfZCIdnQjSnuANMVpwzCCBYgGCSqGSIb3DQEHAaCCBXkEggV1MIIFcTCCBW0GCyqGSIb3DQEMCgECoIIE7jCCBOowHAYKKoZIhvcNAQwBAzAOBAjY5qBXTsymhAICCAAEggTIOuFtIMuFIv4o1m4fkrEKTmXM2/AWwmWtJzu9Tds9QlEMha+hBJWXNcBouJ9gnvMwS1M1NR37wEmalVJNkIuYVpFyp3PGrpvRsS0/BmoSAlJtZwxLjpVIMsrtshETjDpu7NzTKulwJ+oXoPfXsIS4s69QMX6NS3gNYMwMkj4TpHbqw+eiSRWpb2lBiHlOOIQwHKWTcR24exjfeGs7duzgrKhoE5/fDVhGjKJbKCxC8QbjymXUYAdtdYceMajrY9CUSCuqxRAR2PDltLIxTaAsQvR24HFhrCvuUOmBJSzuOuHIi2/QjGLRfPLsypj8V2p/nl8t/CPKBI1CoNs+ldx8bMsUgxGAuEf5h29m0dKK0ZKKBP6kvlYFcD2JTufr4WZUiix4s7JYI14dpUzlLQhF/5UJkKyozy3dVtl/ks+B3TOCL82Tx0sokD3vGnGdRlpvPfy+UJI9KGJTa8U4n63yYM7q+lS7bgkCNR7LLDq2SpofndZ+Jsxl4F0vlAPY+Ok7/61eR+M90vPgrhBCYCiXehd23exiG62eJyR8eGpT8NuH5kqGwoWLKA3K8ohQiuJuCOIhzpet5hxXvBNMNXVPo03HGimggSWAhlqcdynwIBZqczwt9und4jyJQXaIxVlJuKD1LROTswgrLjq4qjtf+Eki3tfzzSGl/SYOvCcIZqWA6LYnMWAdgYlcBQEfRUJbvAHI3PUewt53nMBTPw+xOw+FtjDQSdaGk3MOI6gBv3+co/Z8T0fqD+Z1aAc225E1o/WCYTdaGQqkD+YmQN824/upLdju4BdM72AVsvLkR0x7V1OvPnBNZ+A7r97a7GtzND+HX/2IboKpzGlblStFl295QqOmofUp2XsIHMviFgkTNScMG5v/H9p0aTfCrUwu1c5X1bZ2L4+Pel6fcLAxe9TtGM7y33AZ0I/cT5xk73jMq1LDA5E0aq+AIuUVQbHhrcgTIxN8lQKExQyjoOJ6OIT/J5fl88J8m++lVFprgQfAZ+LhmM5c3DvmHKOfWAYw/nrbgR/LgQZdFv9SWY1D432+2tO8d0Xd0AhC2aUmQ/Q9aOn9JkvPStQgdIQjsJuHHbVvNkw/eOIEGPpko1lHOquVrVVr0w5eDJrXBnNEiHQq2FRw9nuQOaBi/tdm/Vj1bwK0VcQLazjozUD4kWLGbqU4xF4/6BxE6eF/qjLrWHURDlb08qw4owfidDccw0wKeDpOXApXhixTb10MNtDd0fypox76x2IhiSAs0WJnsdEKFGT1V9TVXAwEMrOkkGlhXJZfOv+oU15BaKQZSf1ZQpq1ldiAFb8CfXWR4EiaiNzBdb+XQM0nkA3HptsA93o79yc+7iuYmThZR7KZc+jo6A2d2i61nIqFmaRGGhWMiqT2TIm/vA2dKYd0eYfW4zxmrMnVdLlz2RzrgVZ+eFM6dD3YuLYvsZn0i+GbnSICeqGA5toycDGWhsSr7Bx73JEJt/YJrJLFnlSiuDCTMk5+k1nlwtIoCLZm24Yuk3QBYz4Fc4ZFvyu1uVDrmShzFAzqzjnoYFwrSJE+33uOCUPsoVCWItDxIkIvEVKXnAsD8SoGSmp0UB+c03SoMLeakJDw/VwXefSYXw9++NgkJ/Cu+cp8LPPiMzgdMWwwIwYJKoZIhvcNAQkVMRYEFHTGemKF7RZgfnMhzkYb7D/S32+6MEUGCSqGSIb3DQEJFDE4HjYAUwB1AHIAZwBlACAARwBlAG4AZQByAGEAdABlAGQAIABDAEEAIAAyADIARAA2ADYAMgAyAEYwLTAhMAkGBSsOAwIaBQAEFGTX8nXZVBDSH3SMUbJ1RJdUYWnABAhihRh21VJ6BQ==
